// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 기존 스키마 변경점 공유
// 1. 날짜 컬럼명 'createdAt' 으로 통일 => 
//      테이블 명으로 해당 테이블에 대한 설명을 말해주기 때문에 생성 날짜로 두어도 괜찮다고 판단.
// 2. game_log 에서 game_logs 로 변경 =>
//      다른 테이블명 처럼 복수형으로 맞춤.
// 3. users의 id와 results의 user_id가 연결되도록 설정 =>
//      results에 기본 키 id와 연결되고 있었음 + user_id 컬럼 별도 존재

model users {
  id Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  high_score Int? @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime?

  game_logs game_logs[]
  results results[]
}

model game_logs {
  id Int  @id @default(autoincrement())
  user_id Int
  handler_id Int
  msessage String
  createdAt DateTime @default(now())

  users users @relation(fields: [user_id], references: [id])
}

model results {
  id Int @id @default(autoincrement())
  user_id Int
  score Int
  wave Int
  createdAt DateTime @default(now())
  users users @relation(fields: [user_id], references: [id])
}